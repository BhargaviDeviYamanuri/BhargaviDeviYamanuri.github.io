<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  </head>
  <body onload="redirect()">
    <script>
        function getMobileOperatingSystem() {
            var userAgent = navigator.userAgent || navigator.vendor || window.opera;
            console.log('Inside getMobileOperatingSystem method -- user agent ===> ', userAgent);
    
            if (/windows phone/i.test(userAgent)) {
                return 'Windows Phone';
            }
        
            if (/android/i.test(userAgent)) {
                return 'Android';
            }
        
            if (/iPad|iPhone|iPod/.test(userAgent) && !window.MSStream) {
                return 'iOS';
            }
        
            return "unknown";
        }
    
        function redirect() {
          console.log('Inside redirect method - from html hosted on root');
          
          const searchParams = new URLSearchParams(window.location.search);
          const referralCode = searchParams.get('referralCode');
          const domainEnv = window.location.hostname.split('.')[0].split('-')[1];
          console.log('Domain for corresponding environment --> ', domainEnv);
          console.log('Referral code --> ', referralCode); // check referral code sent in query params
          let platform = getMobileOperatingSystem();
          console.log('Inside redirect method, Platform ==> ', platform);
            setTimeout(function () { 
                  window.location = 'https://play.google.com/store/apps/details?id=com.snb.alahlimobile'; }, 3000);//Play store
                  window.location = 'snbneo://bhargavideviyamanuri.github.io/test' + referralCode;
        }
      </script>
  </body>
</html>
